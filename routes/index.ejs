<html>
	<link rel="stylesheet" type="text/css" href="https://cdn.rawgit.com/calipho-sib/feature-viewer/v1.0.0/dist/feature-viewer.min.css">
	<link rel="stylesheet" type="text/css" href="stylesheets/index.css">
	<script src="https://cdn.rawgit.com/calipho-sib/feature-viewer/v1.0.0/dist/feature-viewer.bundle.js"></script>

	<body>
		<div class="splitl left">
		    <div class="sidenav">
		      <h2>Influenza A Strains</h2>
		      <button class="dropdown-btn">Strain 1
		        <i class="fa fa-caret-down"></i>
		      </button>
		      <div class="dropdown-container">
		        <a href=":Strain/:year">Substrain 1</a>
		        <a href="#">Substrain 2</a>
		        <a href="#">Substrain 3</a>
		      </div>

		      <button class="dropdown-btn">Strain 2
		        <i class="fa fa-caret-down"></i>
		      </button>
		      <div class="dropdown-container">
		        <a href="#">Link 1</a>
		        <a href="#">Link 2</a>
		        <a href="#">Link 3</a>
		      </div>

		      <button class="dropdown-btn">Strain 3
		        <i class="fa fa-caret-down"></i>
		      </button>
		      <div class="dropdown-container">
		        <a href="#">Link 1</a>
		        <a href="#">Link 2</a>
		        <a href="#">Link 3</a>
		      </div>
		    </div>
		</div>

		<div class="splitr right">
		  	<div id="fvH"></div>
		  	<div id="fvN"></div>
		  	<div id="fv2"></div>
		    <h2>Past Outbreak News</h2>
		    	<p>Ligma</p>
		    <h2>Strain Similarity</h2>
		    	<p>This strain is x% similar to the most recent strain</p>
		    <h2>Severity</h2>
		  </div>
		</div>
		
		<script>

			var ftH = new FeatureViewer(sequenceH,
               '#fvH',
                {
                    showAxis: true,
                    showSequence: true,
                    brushActive: true, //zoom
                    toolbar:true, //current zoom & mouse position
                    bubbleHelp:true, 
                    zoomMax:50 //define the maximum range of the zoom
                });

			var ftN = new FeatureViewer(sequenceH,
               '#fvN',
                {
                    showAxis: true,
                    showSequence: true,
                    brushActive: true, //zoom
                    toolbar:true, //current zoom & mouse position
                    bubbleHelp:true, 
                    zoomMax:50 //define the maximum range of the zoom
                });

			// data should be dependent on the particular strain they send and should pull from db accordingly 
			// Combination of H and N, 2:1 ratio in terms of weighting
			var data = [];
			for (var i=1;i<100;i++) {
			    var count = (Math.random() * 2.6);
			    data.push({
			        x: i*1.5,
			        y:count
			    })
			}

			var b = <%= viewpd %>

			if(b){
				var pft = new FeatureViewer('MALWMRLLPLLALLALWGPGPGAGSLQPLALEGSLQKRGIVEQCCTSICSLYQLE',
	               '#fv2',
	                {
	                    showAxis: true,
	                    showSequence: true,
	                    brushActive: true, //zoom
	                    toolbar:true, //current zoom & mouse position
	                    bubbleHelp:true, 
	                    zoomMax:50 //define the maximum range of the zoom
	                });

				pft.addFeature({
			    data: ddata,
			    name: "Frequency Distibution",
			    className: "test6", //can be used for styling
			    color: "#0F8292",
			    type: "line" // ['rect', 'path', 'line']
			});

            }           
			//Instead of a sequence, you can also initialize the feature viewer with a length (integer) :
			//var ft = new FeatureViewer(213,'#fv1');

			mutationIntervalsH =  [];

			for (var i = 0; i < probabilityIntervalsH.length; i++){
				mutationIntervalsH.push({
			        x: probabilityIntervals[i][0],
			        y: probabilityIntervals[i][1]
			    })
			}

			mutationIntervalsN =  [];

			for (var i = 0; i < probabilityIntervalsN.length; i++){
				mutationIntervalsN.push({
			        x: probabilityIntervals[i][0],
			        y: probabilityIntervals[i][1]
			    })
			}


			ftH.addFeature({
			    data: mutationIntervalsH,
				name: "Hemagglutinin",
				className: "test1",
				color: "#005572",
				type: "rect",
   				filter: "type1"
			});

			ftN.addFeature({
			    data: mutationIntervalsN,
				name: "Neuraminidase",
				className: "test1",
				color: "#005572",
				type: "rect",
				filter: "type1"
			});

			



		</script>

		<script>
			var dropdown = document.getElementsByClassName("dropdown-btn");
			var i;

			for (i = 0; i < dropdown.length; i++) {
			  dropdown[i].addEventListener("click", function() {
			    this.classList.toggle("active");
			    var dropdownContent = this.nextElementSibling;
			    if (dropdownContent.style.display === "block") {
			      dropdownContent.style.display = "none";
			    } else {
			      dropdownContent.style.display = "block";
			    }
			  });
			}

		</script>

</html>

